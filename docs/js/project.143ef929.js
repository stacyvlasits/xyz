(function(t){function n(n){for(var o,i,r=n[0],c=n[1],s=n[2],m=0,u=[];m<r.length;m++)i=r[m],Object.prototype.hasOwnProperty.call(l,i)&&l[i]&&u.push(l[i][0]),l[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);d&&d(n);while(u.length)u.shift()();return a.push.apply(a,s||[]),e()}function e(){for(var t,n=0;n<a.length;n++){for(var e=a[n],o=!0,r=1;r<e.length;r++){var c=e[r];0!==l[c]&&(o=!1)}o&&(a.splice(n--,1),t=i(i.s=e[0]))}return t}var o={},l={project:0},a=[];function i(n){if(o[n])return o[n].exports;var e=o[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=t,i.c=o,i.d=function(t,n,e){i.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,n){if(1&n&&(t=i(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)i.d(e,o,function(n){return t[n]}.bind(null,o));return e},i.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(n,"a",n),n},i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},i.p="/xyz/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=n,r=r.slice();for(var s=0;s<r.length;s++)n(r[s]);var d=c;a.push([1,"chunk-vendors","chunk-common"]),e()})({1:function(t,n,e){t.exports=e("cf28")},cf28:function(t,n,e){"use strict";e.r(n);var o=e("f2bf"),l=e("a911"),a=e("ea67"),i=e("3fd7"),r=e("5110");const c=Object(o["e"])("h2",null,"Permalink for this page",-1),s=Object(o["d"])(" Visit: "),d=Object(o["e"])("br",null,null,-1),m=Object(o["e"])("h2",null,"XYZ extract tool",-1),u=Object(o["d"])(" Visit: "),p=Object(o["e"])("br",null,null,-1),h=Object(o["e"])("h2",null,"ArchiCAD Project",-1),b=Object(o["d"])(" Initial project file "),f=Object(o["e"])("br",null,null,-1),g=Object(o["e"])("p",null,null,-1),j=Object(o["d"])("Preview: "),O={ref:"xmlDisplay"};function x(t,n,e,l,a,i){return Object(o["f"])(),Object(o["c"])(o["a"],null,[c,s,Object(o["e"])("a",{target:"_new",href:a.servePath+"/project#lat="+e.coordinate.lat+"&lon="+e.coordinate.lon+"&min_lat="+e.min.lat+"&min_lon="+e.min.lon+"&max_lat="+e.max.lat+"&max_lon="+e.max.lon},"lat: "+Object(o["k"])(e.coordinate.lat)+" lon: "+Object(o["k"])(e.coordinate.lon)+" min: "+Object(o["k"])(e.min.lat)+" "+Object(o["k"])(e.min.lon)+" max: "+Object(o["k"])(e.max.lat)+" "+Object(o["k"])(e.max.lon),9,["href"]),d,m,u,Object(o["e"])("a",{target:"_new",href:a.servePath+"/extract#lat="+e.coordinate.lat+"&lon="+e.coordinate.lon+"&min_lat="+e.min.lat+"&min_lon="+e.min.lon+"&max_lat="+e.max.lat+"&max_lon="+e.max.lon},"lat: "+Object(o["k"])(e.coordinate.lat)+" lon: "+Object(o["k"])(e.coordinate.lon)+" min: "+Object(o["k"])(e.min.lat)+" "+Object(o["k"])(e.min.lon)+" max: "+Object(o["k"])(e.max.lat)+" "+Object(o["k"])(e.max.lon),9,["href"]),p,h,b,Object(o["e"])("button",{ref:"dlBtn",onClick:n[1]||(n[1]=(...t)=>i.onClick&&i.onClick(...t))},"Download",512),f,g,j,Object(o["e"])("div",O,null,512)],64)}let v=null;var _={props:{coordinate:Object,min:Object,max:Object,altitude:Number,northing:Number},data(){return{servePath:"/xyz"}},setup(){const t=Object(o["i"])(null),n=Object(o["i"])(null);return{dlBtn:t,xmlDisplay:n}},watch:{coordinate:{handler(){this.validateInput()},deep:!0},min:{handler(){this.validateInput()},deep:!0},max:{handler(){this.validateInput()},deep:!0},altitude:{handler(){this.validateInput()},deep:!0},northing:{handler(){this.validateInput()},deep:!0}},methods:{validateInput(){const t=Object(a["b"])(this.coordinate.lat),n=Object(a["b"])(this.coordinate.lon);let e,o;if(this.coordinate.originalCoordinate){const t=this.coordinate.originalCoordinate;[e,o]=[t.lat,t.lon]}else[e,o]=Object(a["e"])(this.coordinate.lat,this.coordinate.lon);const l=`<?xml version="1.0" encoding="UTF-8"?>\n<ProjectLocation>\n  <Version val="1"/>\n  <LatitudeCoord deg="${t.deg}" min="${t.min}" sec="${t.sec.toFixed(5)}"/>\n  <LatitudeNorth val="${e}"/>\n  <LongitudeCoord deg="${n.deg}" min="${n.min}" sec="${n.sec.toFixed(5)}"/>\n  <LongitudeEast val="${o}"/>\n  <LongLatUnit val="11"/>\n  <TimeZoneHour val="1"/>\n  <TimeZoneMinute val="0"/>\n  <AltitudeMeter val="${this.altitude}"/>\n  <AltitudeUnit val="1"/>\n  <NorthDirection val="${this.northing}"/>\n  <NorthAngleUnit val="0"/>\n</ProjectLocation>`,i=Number.isFinite;if(!(i(t.deg)&&i(t.min)&&i(t.sec)&&i(n.deg)&&i(n.min)&&i(n.sec)))return console.log("Invalid coords: ",l),void(v=null);this.xmlDisplay.innerHTML="<pre>"+l.replaceAll("<","&lt;").replaceAll(">","&gt;")+"</pre>";const r=new Blob([l],{type:"text/xml;charset=utf-8"}),c=window.URL.createObjectURL(r);v=c},onClick(t){const n=document.createElement("a");n.href=v,n.target="_blank",n.download="project.xml",n.click()}}};_.render=x;var y=_;e("7dcc");let k,w,C;const P={lat:46.951082773,lon:7.438632421,system:a["a"].WGS84},L={lat:l["a"].lat||P.lat,lon:l["a"].lon||P.lon,system:l["a"].system||P.system};function M(t){return Object.assign({},t)}let $,I;const B=o["b"]({components:{"coords-form":r["a"],"bounds-form":i["a"],"project-tools":y},data(){return{coordinate:M(L),min:{lat:l["a"].min_lat||P.lat,lon:l["a"].min_lon||P.lon,system:L.system},max:{lat:l["a"].max_lat||P.lat,lon:l["a"].max_lon||P.lon,system:L.system},pri_coordinate:M(L),pri_min:{lat:l["a"].min_lat||P.lat,lon:l["a"].min_lon||P.lon},pri_max:{lat:l["a"].max_lat||P.lat,lon:l["a"].max_lon||P.lon},pri_altitude:0,pri_northing:0}},methods:{getBounds(){return{min:this.pri_min,max:this.pri_max}},onCoordChanged(t){$=A.$refs.coords_form.getCoord(),this.pri_coordinate.lat=t.lat,this.pri_coordinate.lon=t.lon,$.originalCoordinate&&(this.pri_coordinate.originalCoordinate=$.originalCoordinate),I={lat:$.lat,lng:$.lon},T(I.lat,I.lng)},onBounds(t){this.pri_min.lat=t.min.lat,this.pri_min.lon=t.min.lon,this.pri_max.lat=t.max.lat,this.pri_max.lon=t.max.lon,D(this.getBounds())}}}),A=B.mount("#app");function T(t,n){w&&k&&(w.setPosition(new google.maps.LatLng(t,n)),k.panTo(new google.maps.LatLng(t,n)))}function D(t){const[n,e]=[t.min,t.max],o=[{lat:n.lat,lon:n.lon},{lat:n.lat,lon:e.lon},{lat:e.lat,lon:e.lon},{lat:e.lat,lon:n.lon},{lat:n.lat,lon:n.lon}];C&&C.setMap(null),C=new google.maps.Rectangle({paths:o,strokeColor:"#000000",strokeOpacity:1,strokeWeight:3,map:k,bounds:{north:e.lat,south:n.lat,east:e.lon,west:n.lon}}),C.setMap(k)}$=A.$refs.coords_form.getCoord(),I={lat:$.lat,lng:$.lon},window.initMap=()=>{k=new google.maps.Map(document.getElementById("map"),{zoom:17,center:I}),w=new google.maps.Marker({map:k,position:I}),D(A.getBounds())}}});
//# sourceMappingURL=project.143ef929.js.map