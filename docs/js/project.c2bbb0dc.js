(function(t){function n(n){for(var o,a,r=n[0],c=n[1],s=n[2],d=0,p=[];d<r.length;d++)a=r[d],Object.prototype.hasOwnProperty.call(l,a)&&l[a]&&p.push(l[a][0]),l[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);m&&m(n);while(p.length)p.shift()();return i.push.apply(i,s||[]),e()}function e(){for(var t,n=0;n<i.length;n++){for(var e=i[n],o=!0,r=1;r<e.length;r++){var c=e[r];0!==l[c]&&(o=!1)}o&&(i.splice(n--,1),t=a(a.s=e[0]))}return t}var o={},l={project:0},i=[];function a(n){if(o[n])return o[n].exports;var e=o[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.m=t,a.c=o,a.d=function(t,n,e){a.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,n){if(1&n&&(t=a(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(a.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)a.d(e,o,function(n){return t[n]}.bind(null,o));return e},a.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(n,"a",n),n},a.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},a.p="/xyz/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=n,r=r.slice();for(var s=0;s<r.length;s++)n(r[s]);var m=c;i.push([1,"chunk-vendors","chunk-common"]),e()})({1:function(t,n,e){t.exports=e("cf28")},cf28:function(t,n,e){"use strict";e.r(n);var o=e("f2bf"),l=e("a911"),i=e("ea67"),a=e("3fd7"),r=e("5110");const c=Object(o["e"])("h2",null,"Permalink for this page",-1),s=Object(o["d"])(" Visit: "),m=Object(o["e"])("br",null,null,-1),d=Object(o["e"])("h2",null,"XYZ extract tool",-1),p=Object(o["d"])(" Visit: "),u=Object(o["e"])("br",null,null,-1),h=Object(o["e"])("h2",null,"ArchiCAD Project",-1),b=Object(o["d"])(" Initial project file "),f=Object(o["e"])("br",null,null,-1),g=Object(o["e"])("p",null,null,-1),j=Object(o["d"])("Preview: "),x={ref:"xmlDisplay"};function O(t,n,e,l,i,a){return Object(o["f"])(),Object(o["c"])(o["a"],null,[c,s,Object(o["e"])("a",{target:"_new",href:i.servePath+"/project#lat="+e.coordinate.lat+"&lon="+e.coordinate.lon+"&min_lat="+e.min.lat+"&min_lon="+e.min.lon+"&max_lat="+e.max.lat+"&max_lon="+e.max.lon},"lat: "+Object(o["k"])(e.coordinate.lat)+" lon: "+Object(o["k"])(e.coordinate.lon)+" min: "+Object(o["k"])(e.min.lat)+" "+Object(o["k"])(e.min.lon)+" max: "+Object(o["k"])(e.max.lat)+" "+Object(o["k"])(e.max.lon),9,["href"]),m,d,p,Object(o["e"])("a",{target:"_new",href:i.servePath+"/extract#lat="+e.coordinate.lat+"&lon="+e.coordinate.lon+"&min_lat="+e.min.lat+"&min_lon="+e.min.lon+"&max_lat="+e.max.lat+"&max_lon="+e.max.lon},"lat: "+Object(o["k"])(e.coordinate.lat)+" lon: "+Object(o["k"])(e.coordinate.lon)+" min: "+Object(o["k"])(e.min.lat)+" "+Object(o["k"])(e.min.lon)+" max: "+Object(o["k"])(e.max.lat)+" "+Object(o["k"])(e.max.lon),9,["href"]),u,h,b,Object(o["e"])("button",{ref:"dlBtn",onClick:n[1]||(n[1]=(...t)=>a.onClick&&a.onClick(...t))},"Download",512),f,g,j,Object(o["e"])("div",x,null,512)],64)}let _=null;var v={props:{coordinate:Object,min:Object,max:Object,altitude:Number,northing:Number},data(){return{servePath:"/xyz"}},setup(){const t=Object(o["i"])(null),n=Object(o["i"])(null);return{dlBtn:t,xmlDisplay:n}},watch:{coordinate:{handler(){this.validateInput()},deep:!0},min:{handler(){this.validateInput()},deep:!0},max:{handler(){this.validateInput()},deep:!0},altitude:{handler(){this.validateInput()},deep:!0},northing:{handler(){this.validateInput()},deep:!0}},methods:{validateInput(){const t=Object(i["b"])(this.coordinate.lat),n=Object(i["b"])(this.coordinate.lon);let e,o;if(this.coordinate.originalCoordinate){const t=this.coordinate.originalCoordinate;[e,o]=[t.lat,t.lon]}else[e,o]=Object(i["e"])(this.coordinate.lat,this.coordinate.lon);const l=`<?xml version="1.0" encoding="UTF-8"?>\n<ProjectLocation>\n  <Version val="1"/>\n  <LatitudeCoord deg="${t.deg}" min="${t.min}" sec="${t.sec.toFixed(5)}"/>\n  <LatitudeNorth val="${e}"/>\n  <LongitudeCoord deg="${n.deg}" min="${n.min}" sec="${n.sec.toFixed(5)}"/>\n  <LongitudeEast val="${o}"/>\n  <LongLatUnit val="11"/>\n  <TimeZoneHour val="1"/>\n  <TimeZoneMinute val="0"/>\n  <AltitudeMeter val="${this.altitude}"/>\n  <AltitudeUnit val="1"/>\n  <NorthDirection val="${this.northing}"/>\n  <NorthAngleUnit val="0"/>\n</ProjectLocation>`,a=Number.isFinite;if(!(a(t.deg)&&a(t.min)&&a(t.sec)&&a(n.deg)&&a(n.min)&&a(n.sec)))return console.log("Invalid coords: ",l),void(_=null);this.xmlDisplay.innerHTML="<pre>"+l.replaceAll("<","&lt;").replaceAll(">","&gt;")+"</pre>";const r=new Blob([l],{type:"text/xml;charset=utf-8"}),c=window.URL.createObjectURL(r);_=c},onClick(t){const n=document.createElement("a");n.href=_,n.target="_blank",n.download="project.xml",n.click()}}};v.render=O;var y=v;e("7dcc");let k,w,C;const P={lat:46.951082773,lon:7.438632421,system:i["a"].WGS84};console.log("permalink in project/main.js: ",l["a"]);const L={lat:l["a"].lat||P.lat,lon:l["a"].lon||P.lon,system:l["a"].system||P.system};function M(t){return Object.assign({},t)}let $,I;const A=o["b"]({components:{"coords-form":r["a"],"bounds-form":a["a"],"project-tools":y},data(){return{coordinate:M(L),min:M(L),max:M(L),pri_coordinate:M(L),pri_min:M(L),pri_max:M(L),pri_altitude:0,pri_northing:0}},methods:{onCoordChanged(t){$=T.$refs.coords_form.getCoord(),this.pri_coordinate.lat=t.lat,this.pri_coordinate.lon=t.lon,$.originalCoordinate&&(this.pri_coordinate.originalCoordinate=$.originalCoordinate),I={lat:$.lat,lng:$.lon},D(I.lat,I.lng),this.min.lat=t.lat,this.min.lon=t.lon,this.max.lat=t.lat,this.max.lon=t.lon,this.pri_min.lat=t.lat,this.pri_min.lon=t.lon,this.pri_max.lat=t.lat,this.pri_max.lon=t.lon},onBounds(t){this.pri_min.lat=t.min.lat,this.pri_min.lon=t.min.lon,this.pri_max.lat=t.max.lat,this.pri_max.lon=t.max.lon;const n=[{lat:this.pri_min.lat,lon:this.pri_min.lon},{lat:this.pri_min.lat,lon:this.pri_max.lon},{lat:this.pri_max.lat,lon:this.pri_max.lon},{lat:this.pri_max.lat,lon:this.pri_min.lon},{lat:this.pri_min.lat,lon:this.pri_min.lon}];C&&C.setMap(null),C=new google.maps.Rectangle({paths:n,strokeColor:"#000000",strokeOpacity:1,strokeWeight:3,map:k,bounds:{north:this.pri_max.lat,south:this.pri_min.lat,east:this.pri_max.lon,west:this.pri_min.lon}}),C.setMap(k)}}}),T=A.mount("#app");function D(t,n){w&&k&&(w.setPosition(new google.maps.LatLng(t,n)),k.panTo(new google.maps.LatLng(t,n)))}$=T.$refs.coords_form.getCoord(),I={lat:$.lat,lng:$.lon},window.initMap=()=>{k=new google.maps.Map(document.getElementById("map"),{zoom:17,center:I}),w=new google.maps.Marker({map:k,position:I})}}});
//# sourceMappingURL=project.c2bbb0dc.js.map