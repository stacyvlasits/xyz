{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/project/ProjectTools.vue","webpack:///./js/project/ProjectTools.vue?a150","webpack:///./js/project/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","ref","target","href","servePath","coordinate","lat","lon","min","max","onClick","dlUrl","props","altitude","Number","northing","dlBtn","xmlDisplay","watch","this","validateInput","deep","methods","N","E","originalCoordinate","oc","fileContent","deg","sec","toFixed","chk","isFinite","console","log","innerHTML","replaceAll","Blob","type","url","URL","createObjectURL","ev","anchor","document","createElement","download","click","render","map","marker","boundsRect","bern","system","WGS84","center","clone","obj","assign","displayCoord","gCoord","app","components","CoordsForm","BoundsForm","ProjectTools","min_lat","min_lon","max_lat","max_lon","pri_coordinate","pri_min","pri_max","pri_altitude","pri_northing","vm","$refs","coords_form","getCoord","lng","centerMap","drawBoundingBox","getBounds","mount","setPosition","google","maps","LatLng","panTo","bounds","boxCoords","setMap","Rectangle","paths","strokeColor","strokeOpacity","strokeWeight","north","south","east","west","initMap","Map","getElementById","zoom","Marker","position"],"mappings":"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","file":"js/project.143ef929.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"project\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/xyz/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([1,\"chunk-vendors\",\"chunk-common\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","<template>\n<h2>Permalink for this page</h2>\nVisit: <a target=\"_new\" v-bind:href=\"servePath + '/project#lat=' + coordinate.lat + '&lon=' + coordinate.lon + '&min_lat=' + min.lat + '&min_lon=' + min.lon + '&max_lat=' + max.lat + '&max_lon=' + max.lon\">lat: {{ coordinate.lat }} lon: {{ coordinate.lon}} min: {{min.lat}} {{min.lon}} max: {{max.lat}} {{max.lon}}</a><br/>\n<h2>XYZ extract tool</h2>\nVisit: <a target=\"_new\" v-bind:href=\"servePath + '/extract#lat=' + coordinate.lat + '&lon=' + coordinate.lon + '&min_lat=' + min.lat + '&min_lon=' + min.lon + '&max_lat=' + max.lat + '&max_lon=' + max.lon\">lat: {{ coordinate.lat }} lon: {{ coordinate.lon}} min: {{min.lat}} {{min.lon}} max: {{max.lat}} {{max.lon}}</a><br/>\n<!--  Crd lat: {{coordinate.lat}}, lon: {{coordinate.lon}}, N: {{coordinate.N}}, E: {{coordinate.E}}<br/>\n  Min lat: {{min.lat}}, lon: {{min.lon}}, N: {{min.N}}, E: {{min.E}}<br/>\n  Max lat: {{max.lat}}, lon: {{max.lon}}, N: {{max.N}}, E: {{max.E}}<br/>\n  Altitude: {{altitude}},\n  Northing: {{northing}}-->\n<h2>ArchiCAD Project</h2>\n  Initial project file\n<button ref=\"dlBtn\" v-on:click=\"onClick\">Download</button><br/>\n<p/>Preview:\n  <div ref=\"xmlDisplay\"></div>\n</template>\n<script>\nimport {ref} from 'vue';\nimport {deg2dms,wgs2lv95} from '../coords/coords.js';\n\n\nlet dlUrl = null;\nexport default {\n  props: {\n    coordinate: Object,\n    min: Object,\n    max: Object,\n    altitude: Number,\n    northing: Number\n  },\n  data() {\n    return {\n      servePath: process.env.NODE_ENV == 'development' ? '' : '/xyz'\n    };\n  },\n  setup() {\n    //console.log('ProjectTools: ', this.coordinate);\n    const dlBtn = ref(null);\n    const xmlDisplay = ref(null);\n    //this.min.lat = this.max.lat = this.coordinate.lat;\n    //this.min.lon = this.max.lon = this.coordinate.lon;\n    return {\n      dlBtn, xmlDisplay\n    }\n  },\n  watch: {\n    coordinate: {\n      handler() {\n        this.validateInput();\n      },\n      deep: true\n    },\n    min: {\n      handler() {\n        this.validateInput();\n      },\n      deep: true\n    },\n    max: {\n      handler() {\n        this.validateInput();\n      },\n      deep: true\n    },\n    altitude: {\n      handler() {\n        this.validateInput();\n      },\n      deep: true\n    },\n    northing: {\n      handler() {\n        this.validateInput();\n      },\n      deep: true\n    },\n  },\n  methods: {\n    validateInput() {\n      const lat = deg2dms(this.coordinate.lat);\n      const lon = deg2dms(this.coordinate.lon);\n      let N, E;\n      if (this.coordinate.originalCoordinate) {\n        const oc = this.coordinate.originalCoordinate;\n        [N, E] = [oc.lat, oc.lon];\n      } else {\n        [N, E] = wgs2lv95(this.coordinate.lat, this.coordinate.lon);\n      }\n      const fileContent = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<ProjectLocation>\n  <Version val=\"1\"/>\n  <LatitudeCoord deg=\"${lat.deg}\" min=\"${lat.min}\" sec=\"${lat.sec.toFixed(5)}\"/>\n  <LatitudeNorth val=\"${N}\"/>\n  <LongitudeCoord deg=\"${lon.deg}\" min=\"${lon.min}\" sec=\"${lon.sec.toFixed(5)}\"/>\n  <LongitudeEast val=\"${E}\"/>\n  <LongLatUnit val=\"11\"/>\n  <TimeZoneHour val=\"1\"/>\n  <TimeZoneMinute val=\"0\"/>\n  <AltitudeMeter val=\"${this.altitude}\"/>\n  <AltitudeUnit val=\"1\"/>\n  <NorthDirection val=\"${this.northing}\"/>\n  <NorthAngleUnit val=\"0\"/>\n</ProjectLocation>`;\n      const chk = Number.isFinite;\n      if (!(chk(lat.deg) && chk(lat.min) && chk(lat.sec)\n            && chk(lon.deg) && chk(lon.min) && chk(lon.sec))) {\n        console.log('Invalid coords: ', fileContent);\n        dlUrl = null;\n        return;\n      }\n      this.xmlDisplay.innerHTML = '<pre>' +\n        (fileContent.replaceAll('<', '&lt;').replaceAll('>', '&gt;'))\n      + '</pre>';\n      const data = new Blob([fileContent], {type: 'text/xml;charset=utf-8'});\n      const url = window.URL.createObjectURL(data);\n      dlUrl = url;\n    },\n    onClick(ev) {\n      //console.log('ProjectTools#onClick', ev);\n      const anchor = document.createElement('a');\n      anchor.href = dlUrl;\n      anchor.target = '_blank';\n      anchor.download = 'project.xml';\n      anchor.click();\n      //window.URL.revokeObjectURL(dlUrl);\n    }\n  }\n}\n</script>\n","import { render } from \"./ProjectTools.vue?vue&type=template&id=1bb5685f\"\nimport script from \"./ProjectTools.vue?vue&type=script&lang=js\"\nexport * from \"./ProjectTools.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import * as Vue from 'vue';\nimport Permalink from '../permalink.js';\nimport {wgs2lv95, System} from '../coords/coords.js';\nimport BoundsForm from '../bounds/BoundsForm.vue';\nimport CoordsForm from '../coords/CoordsForm.vue';\nimport ProjectTools from './ProjectTools.vue';\n\n// TODO(https://github.com/buildrs/xyz/issues/1): CSS loading is weird.\nimport css from '../../public/index.css';\n\n\nlet map, marker, boundsRect;\n\nconst bern = { lat: 46.951082773, lon: 7.438632421, system: System.WGS84 };\n//[bern.N, bern.E] = wgs2lv95(bern.lat, bern.lon);\n//const bern = { lat: 1200000, lon: 2600000, system: System.LV95 };\n//console.log('permalink in project/main.js: ', Permalink);\nconst center = {\n  lat: Permalink.lat || bern.lat,\n  lon: Permalink.lon || bern.lon,\n  system: Permalink.system || bern.system\n};\n\nfunction clone(obj) {\n  return Object.assign({}, obj);\n}\n\nlet displayCoord, gCoord;\nconst app = Vue.createApp({\n  components: {\n    'coords-form': CoordsForm,\n    'bounds-form': BoundsForm,\n    'project-tools': ProjectTools\n  },\n  data() {\n    return {\n      coordinate: clone(center),\n      min: {\n        lat: Permalink.min_lat || bern.lat,\n        lon: Permalink.min_lon || bern.lon,\n        system: center.system\n      },\n      max: {\n        lat: Permalink.max_lat || bern.lat,\n        lon: Permalink.max_lon || bern.lon,\n        system: center.system\n      },\n      pri_coordinate: clone(center),\n      pri_min: {\n        lat: Permalink.min_lat || bern.lat,\n        lon: Permalink.min_lon || bern.lon,\n      },\n      pri_max: {\n        lat: Permalink.max_lat || bern.lat,\n        lon: Permalink.max_lon || bern.lon,\n      },\n      pri_altitude: 0,\n      pri_northing: 0\n    }\n  },/*\n  created() {\n    console.log(`project/main.js: min.lat: ${this.min.lat}, `\n                + `min.lon: ${this.min.lon}, `\n                + `max.lat: ${this.max.lat}, `\n                + `max.lon: ${this.max.lon}, `\n                + `pri_min.lat: ${this.pri_min.lat}, `\n                + `pri_min.lon: ${this.pri_min.lon}, `\n                + `pri_max.lat: ${this.pri_max.lat}, `\n                + `pri_max.lon: ${this.pri_max.lon}`);\n  },*/\n  methods: {\n    getBounds() {\n      return {min: this.pri_min, max: this.pri_max};\n    },\n    onCoordChanged(ev) {\n      //console.error('project/main.js#onCoordChanged', ev.lat, ev.lon);\n      displayCoord = vm.$refs.coords_form.getCoord();\n      this.pri_coordinate.lat = ev.lat;\n      this.pri_coordinate.lon = ev.lon;\n      if (displayCoord.originalCoordinate) {\n        this.pri_coordinate.originalCoordinate = displayCoord.originalCoordinate;\n      }\n      gCoord = {lat: displayCoord.lat, lng: displayCoord.lon};\n      centerMap(gCoord.lat, gCoord.lng);\n    },\n    onBounds(ev) {\n      //console.error('project/main.js#onBounds', ev);\n      this.pri_min.lat = ev.min.lat;\n      this.pri_min.lon = ev.min.lon;\n      this.pri_max.lat = ev.max.lat;\n      this.pri_max.lon = ev.max.lon;\n      /*\n      console.log(`min_lat: ${ev.min.lat}, min_lon: ${ev.min.lon}, max_lat: ${ev.max.lat}, max_lon: ${ev.max.lon}`);\n      console.log(`pri_min.lat: ${this.pri_min.lat}, `\n                  + `pri_min.lon: ${this.pri_min.lon}, `\n                  + `pri_max.lat: ${this.pri_max.lat}, `\n                  + `pri_max.lon: ${this.pri_max.lon}`);\n      */\n      drawBoundingBox(this.getBounds());\n    }\n  }\n});\n\nconst vm = app.mount('#app');\ndisplayCoord = vm.$refs.coords_form.getCoord();\n// TODO: GMaps uses \"lng\" for longitude.\ngCoord = {lat: displayCoord.lat, lng: displayCoord.lon};\n\n\n// Initialize and add the map\nwindow.initMap = () => {\n  map = new google.maps.Map(document.getElementById(\"map\"), {\n    zoom: 17,\n    // TODO: GMaps uses \"lng\" for longitude.\n    center: gCoord\n  });\n  marker = new google.maps.Marker({\n    map: map,\n    position: gCoord\n  });\n  drawBoundingBox(vm.getBounds());\n};\n\n\nfunction centerMap(lat, lon) {\n  // Avoid race at startup\n  //console.log('centerMap: ', lat, lon);\n  if (marker && map) {\n    marker.setPosition(new google.maps.LatLng(lat, lon));\n    map.panTo(new google.maps.LatLng(lat, lon));\n  }\n}\n\n\nfunction drawBoundingBox(bounds) {\n  const [min, max] = [bounds.min, bounds.max];\n  const boxCoords = [\n    { lat: min.lat, lon: min.lon },\n    { lat: min.lat, lon: max.lon },\n    { lat: max.lat, lon: max.lon },\n    { lat: max.lat, lon: min.lon },\n    { lat: min.lat, lon: min.lon },\n  ];\n  if (boundsRect) {\n    boundsRect.setMap(null);\n  }\n  boundsRect = new google.maps.Rectangle({\n    paths: boxCoords,\n    strokeColor: \"#000000\",\n    strokeOpacity: 1.0,\n    strokeWeight: 3,\n    map,\n    bounds: {\n      north: max.lat,\n      south: min.lat,\n      east: max.lon,\n      west: min.lon,\n    }\n  });\n  boundsRect.setMap(map);\n  //console.log(map, boundsRect);\n  //console.log('project/main.js#onBounds message received', min, max);\n}\n"],"sourceRoot":""}